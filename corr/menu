#!/bin/bash

# Colors
RESET='\033[0m'
BLACK='\033[30m'
RED='\033[31m'
GREEN='\033[32m'
YELLOW='\033[33m'
BLUE='\033[34m'
MAGENTA='\033[35m'
CYAN='\033[36m'
WHITE='\033[37m'

# Menu Colors:
A='\033[1;37m'
B='\033[0;37m'
C='\033[0;91m'
O='\033[0;31m'
X=''


# Clean if exit is triggered
trap cleanup EXIT

# Trap interrupt code (^C ^Z)
trap '' SIGINT SIGTSTP

# Disable text printing
stty -echo

# Disable the cursor
tput civis


# Cleanup function to delete the script
# And re-enable text printing and cursor
cleanup()
{
    #rm -- "$0"
	echo "removed"
    stty echo
    tput cnorm
}

say_hello()
{
    printf "${GREEN}\nHello, World!${RESET}\n"
}

show_date()
{
    printf "${CYAN}\nToday's date is: $(date)${RESET}\n"
}

list_files()
{
    printf "${YELLOW}\nHere are the files in the current directory:${RESET}\n"
    ls
}

invalid_opt()
{
    printf "\n${RED}Invalid option '$choice'. Please try again.${RESET}\n"
}

exit_script()
{
    printf "${GREEN}\nCleaned everything. Goodbye!${RESET}\n"
    exit 0
}


# Main menu loop
while true; do
    clear
	printf "\n"
	printf "  $O┌─$X────────────────────────────$X─┐$RESET\n"
    printf "  $O│ $A        Menu Options        $O │$RESET\n"
    printf "  $O├─$X────────────────────────────$X─┤$RESET\n"
    printf "  $O│ $B 1. Say Hello               $O │$RESET\n"
    printf "  $O│ $B 2. Show Date               $O │$RESET\n"
    printf "  $O│ $B 3. List Files              $O │$RESET\n"
    printf "  $O│ $C 4. Exit                    $O │$RESET\n"
    printf "  $O└─$X────────────────────────────$X─┘$RESET\n"

    # Read a single character from the user without requiring Enter
    read -n 1 -r choice
	tput cub 1
    printf " "
    tput cub 1

    # Execute based on choice
    case $choice in
		1) say_hello ;;
        2) show_date ;;
        3) list_files ;;
      q|4) exit_script ;;
        *) invalid_opt ;;
    esac

	printf "\nPress Enter key to continue..."
    read -r
done
